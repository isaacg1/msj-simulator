import matplotlib.pyplot as plt
plt.rcParams['pdf.fonttype'] = 42
plt.rcParams['ps.fonttype'] = 42

data = """\
rho;ServerFilling;MaxWeight;MostServersFirst;FCFS;ServerFillingSRPT;EASYBackFilling;
0.5;2.3729044941481714;4.453319036714914;2.4479771577988148;6.051970348855922;2.130734402108809;2.744370852217883;
0.52;2.4800545953717057;4.897711525794401;2.578893623943441;7.697652743112314;2.199250142442854;2.9123243625125346;
0.55;2.6555172346247735;5.613531603367871;2.804050595815577;13.299235677368126;2.3053467573579276;3.1908571711909954;
0.57;2.7811594687866394;6.113579473696254;2.97191741915005;24.56274321924189;2.3765489297926945;3.402632654549568;
0.6;2.9871559875231886;6.889137779366235;3.2589765078421213;inf;2.4856939022961124;3.756083569274494;
0.62;3.137863066342138;7.437101185080876;3.478318190628797;inf;2.5598555174448734;4.016998055716156;
0.65;3.3896025858345915;8.312177089453497;3.8674308603820475;inf;2.6745687853808917;4.472711335881744;
0.67;3.576803207042916;8.93342636054884;4.176651144480009;inf;2.7528346886157666;4.82322757251365;
0.7;3.894812536920279;9.907636413159615;4.736567349268579;inf;2.874391264833279;5.4044231277171635;
0.72;4.1365826936446295;10.6221295777471;5.183911797385768;inf;2.9582483920178833;5.859372710317061;
0.74;4.409489182375081;11.36979741661385;5.71577453087864;inf;3.045301469635765;6.378176058884083;
0.76;4.718785083665564;12.161131071060986;6.3542416320086135;inf;3.1357438149803625;6.976351770260469;
0.78;5.0797191328414915;13.012824105800163;7.1410636817918025;inf;3.2311652582144217;7.650376506261131;
0.8;5.502846207092502;13.906163285127874;8.122357630056097;inf;3.331296353885077;8.440955595687901;
0.82;6.006114307417487;14.865951078649067;9.340612140172235;inf;3.439151004548964;9.371658351607735;
0.84;6.612925952971427;15.931579302313558;10.869895943701842;inf;3.555640414654494;10.493913257194006;
0.86;7.3746064343643996;17.079999308381282;12.872635871716781;inf;3.6868119171164264;11.857751236718652;
0.88;8.409407333733093;18.368419430783582;15.751720759234644;inf;3.8437450507633857;13.542387458475801;
0.9;9.89805104540249;19.856487452924664;20.11264243525386;inf;4.040744372738442;15.86538249356093;
0.92;12.307043810809478;21.73631741205073;27.541312101879004;inf;4.30828706498524;19.11840376218532;
0.94;16.476053793434815;24.391924061261225;40.85915762308411;inf;4.7124778762488555;24.162856863456255;
0.95;19.77098944995479;26.289649627094533;51.55271222199357;inf;5.001284455758526;28.078091989999972;
0.96;24.423144353564144;28.90146909167621;66.72559548901671;inf;5.394119768803459;33.81004140728402;
0.97;32.87174257812033;33.21618096889656;94.68257140448338;inf;6.034435336837916;43.35817963897038;
0.98;49.75041856453904;41.465085763339665;150.75308401192677;inf;7.213413610526844;63.084575122070305;
0.985;68.60757637906184;50.57516154592132;213.61064239682588;inf;8.409852612337245;86.28238493261877;
0.99;129.11918723444492;78.63409113965751;inf;inf;11.783498443945053;156.9163296796027;
0.993;214.8210524602641;118.70882457479837;inf;inf;16.524505976979395;248.9100190756406;
0.996;328.6305135479614;171.81076357981024;inf;inf;23.211297283473403;362.45447860042447;
0.997;inf;inf;inf;inf;25.835092680538338;inf;
0.998;inf;inf;inf;inf;28.63700988743733;inf;
0.999;inf;inf;inf;inf;31.66869367609917;inf;
"""

data_srpt = """rho;GreedySRPT;
0.5;0.5897642181836797;
0.52;0.6019929167552603;
0.55;0.6219595016350867;
0.57;0.6364162742267989;
0.6;0.6600407026233585;
0.62;0.6773289420638801;
0.65;0.7060393506254384;
0.67;0.7275417514713478;
0.7;0.7638263193848388;
0.72;0.7917273015018494;
0.74;0.8230450286711439;
0.76;0.8580456641751358;
0.78;0.8982570734106008;
0.8;0.9452158589755185;
0.82;1.000034911758185;
0.84;1.064969903494911;
0.86;1.1446879496058104;
0.88;1.2496931201665844;
0.9;1.3936883876904036;
0.92;1.6117601068828404;
0.94;1.9648369347614034;
0.95;2.228633537302444;
0.96;2.5970220974602247;
0.97;3.2092117228137025;
0.98;4.359214686930588;
0.985;5.540907895497002;
0.99;8.89765547632876;
0.993;13.628653118573649;
0.996;20.312826714820492;
0.997;22.935890020838098;
0.998;25.734710813111533;
0.999;28.782677002191242;"""
rows = data.split()
names = rows[0].split(";")
nums = [[float(cell) if cell != "inf" else 1000 for cell in row.split(";") if cell] for row in rows[1:]]
plt.figure(figsize=(8, 5))
#dashes = [(None, None), (2, 2), (5, 5), (1, 1, 5, 1), (None, None), (None, None)]
for i in [4,2,3,6,1,5]:
    rhos = [row[0] for row in nums]
    means = [row[i] for row in nums]
    plt.plot(rhos, means, label=names[i],)# dashes=dashes[i])
plt.plot(rhos, [float(row.split(";")[1]) for row in data_srpt.split()[1:]], label="SRPT-1")
rhos = [row[0] for row in nums]
theory = [rho / (1 - rho) * 33 / 40 + 1 for rho in rhos]
plt.plot(rhos, theory, label="Theory for ServerFilling")
plt.xlim(0.5, 1)
plt.ylim(0, 30)
plt.xlabel("Load $\\rho$")
plt.ylabel("Mean response time $E[T]$")
plt.legend(loc="upper center")
plt.savefig("response-talk-applied.eps", bbox_inches="tight")


