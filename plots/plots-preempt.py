import matplotlib.pyplot as plt
plt.rcParams['pdf.fonttype'] = 42
plt.rcParams['ps.fonttype'] = 42

data = """\
rho;ServerFilling;MaxWeight;MostServersFirst;FCFS;ServerFillingSRPT;EASYBackfilling;
0.5;0.335696;0.337003;0.266366;0;0.613083;0;
0.52;0.361056;0.37178;0.277642;0;0.684462;0;
0.55;0.402088;0.434995;0.293725;0;0.799904;0;
0.57;0.431404;0.483577;0.304121;0;0.884188;0;
0.6;0.480305;0.564583;0.319371;inf;1.023962;0;
0.62;0.515204;0.626282;0.3296;inf;1.126984;0;
0.65;0.573368;0.730717;0.346223;inf;1.296701;0;
0.67;0.614541;0.810216;0.357096;inf;1.417061;0;
0.7;0.680038;0.941291;0.37346;inf;1.613077;0;
0.72;0.726745;1.041509;0.385236;inf;1.752204;0;
0.74;0.775077;1.15071;0.396702;inf;1.89622;0;
0.76;0.824989;1.272112;0.407583;inf;2.048644;0;
0.78;0.878045;1.403138;0.419184;inf;2.206313;0;
0.8;0.932287;1.551591;0.429599;inf;2.36993;0;
0.82;0.988367;1.715179;0.441116;inf;2.539207;0;
0.84;1.045209;1.895745;0.451189;inf;2.709041;0;
0.86;1.104344;2.096335;0.459436;inf;2.891193;0;
0.88;1.165758;2.320467;0.471236;inf;3.078053;0;
0.9;1.228747;2.572094;0.482784;inf;3.271018;0;
0.92;1.291974;2.854683;0.492322;inf;3.462818;0;
0.94;1.357309;3.168618;0.502566;inf;3.663626;0;
0.95;1.390002;3.3397;0.507372;inf;3.760567;0;
0.96;1.422603;3.513175;0.512287;inf;3.861257;0;
0.97;1.457181;3.696487;0.518021;inf;3.965509;0;
0.98;1.491686;3.888135;0.523478;inf;4.069191;0;
0.985;1.508682;3.985478;0.526018;inf;4.11893;0;
0.99;1.525728;4.084907;inf;inf;4.175567;0;
0.993;1.533452;4.129882;inf;inf;4.196906;0;
0.996;1.540063;4.16586;inf;inf;4.214711;0;
0.997;1.542377;4.174803;inf;inf;4.220447;0;
0.998;1.544607;4.188488;inf;inf;4.223109;0;
0.999;1.546662;4.200291;inf;inf;4.231924;0;
"""

rows = data.split()
names = rows[0].split(";")
nums = [[float(cell) if cell != "inf" else 1000 for cell in row.split(";") if cell] for row in rows[1:]]
plt.figure(figsize=(8, 5))
#dashes = [(None, None), (2, 2), (5, 5), (1, 1, 5, 1), (None, None), (None, None)]
for i in [4,2,3,6,1,5]:
    rhos = [row[0] for row in nums]
    means = [row[i] for row in nums if row[i] < 1000]
    rhos = rhos[:len(means)]
    plt.plot(rhos, means, label=names[i],)# dashes=dashes[i])
plt.xlim(0.5, 1)
plt.ylim(0, 5)
plt.xlabel("Load $\\rho$")
plt.ylabel("Preemptions per job")
plt.legend(loc="upper center")
plt.savefig("preempt-applied.eps", bbox_inches="tight")


