import matplotlib.pyplot as plt
plt.rcParams['pdf.fonttype'] = 42
plt.rcParams['ps.fonttype'] = 42


data_exp = """\
rho;ServerFilling;MaxWeight;ServerFillingSRPT;MostServersFirst;SRPT-1
0.84;1.125249283;2.703154237;0.8337278572;1.152280704;0.3342619083
0.86;1.234838938;2.924591107;0.871006796;1.263857854;0.3614236028
0.88;1.380907701;3.218500814;0.9169562815;1.412270988;0.3960803198
0.9;1.583788779;3.634922974;0.9757400204;1.617477899;0.4420396214
0.92;1.883390754;4.273475415;1.055160255;1.919791435;0.5064883605
0.94;2.376556121;5.346266392;1.172724124;2.414831611;0.6054307584
0.95;2.768426679;6.190934974;1.257869341;2.807770655;0.6799454124
0.96;3.347341446;7.367464848;1.375800896;3.387572907;0.7849408086
0.97;4.327322889;9.117522967;1.558039886;4.367811911;0.9512090456
0.98;6.265690811;12.00518542;1.887711189;6.304832615;1.260640588
0.985;8.280028701;14.53212528;2.198206045;8.322956265;1.558241987
0.99;12.42511582;19.1240466;2.792444985;12.46339208;2.137192433
0.993;17.3957795;24.4607299;3.463819829;17.42988103;2.795823567
0.996;31.28161927;38.31654046;5.152047728;31.30111052;4.466085562
0.997;41.33802075;48.34001103;6.328878598;41.34945138;5.640997304
0.998;58.28263963;65.18191034;8.262118431;58.27247168;7.560321076
0.999;98.05106681;105.2220948;12.4667341;97.99391103;11.75038032
"""

data_hyp = """\
rho;ServerFilling;MaxWeight;ServerFillingSRPT;MostServersFirst;SRPT-1
0.84;3.276736417;4.676055623;0.8486694754;2.909560557;0.300132878
0.86;3.887914728;5.29500596;0.8820944952;3.466947506;0.3201079941
0.88;4.718630543;6.12644913;0.9223101551;4.233229325;0.3452493021
0.9;5.882706987;7.289971125;0.9725634559;5.317341473;0.3778099216
0.92;7.625803463;9.031261907;1.039050347;6.972029501;0.4223316609
0.94;10.53955883;11.95866115;1.133976086;9.773678589;0.4900359722
0.95;12.83944916;14.27350127;1.20084093;12.02040691;0.5407043723
0.96;16.35378632;17.80693831;1.291784222;15.46995459;0.6142587072
0.97;22.42662649;23.85215434;1.430603181;21.48932429;0.7366948745
0.98;35.12404591;36.54412058;1.681208416;34.13101064;0.9765305659
0.985;48.65937914;50.13911831;1.918025565;1000;1.216646329
0.99;80.43523408;81.97143539;2.409315402;1000;1.708768862
0.993;1000;1000;3.008499145;1000;2.341974093
0.996;1000;1000;4.512065938;1000;3.649995945
0.997;1000;1000;5.342006603;1000;4.358820004
0.998;1000;1000;6.364441833;1000;5.227935111
0.999;1000;1000;7.901833066;1000;6.466819686
"""


for (data_i, data) in enumerate([data_exp, data_hyp]):
    rows = data.split()
    names = rows[0].split(";")
    nums = [[float(cell) for cell in row.split(";")] for row in rows[1:]]
    plt.figure(figsize=(5, 3))
    dashes = [(None, None), (2, 2), (5, 5), (1, 1, 5, 1), (None, None), (None, None)]
    for i in [2,1,3,5]:
        rhos = [row[0] for row in nums]
        means = [row[i] for row in nums]
        divisors = [row[5] for row in nums]
        ratios = [m/d for (m, d) in zip(means, divisors)]
        plt.plot(rhos, ratios, label=names[i], dashes=dashes[i])
    plt.xlim(0.85, 1)
    plt.ylim(0, [10,20][data_i])
    plt.xlabel("Load $\\rho$")
    plt.ylabel("Ratio $E[T^\\pi]/E[T^{SRPT‚Äê1}]$")
    plt.legend()
    plt.savefig("ratios-{}.eps".format(["exp", "hyp"][data_i]), bbox_inches="tight")


